# Challenge

>Documentation helps the consumer understand how to use your API.

## Launch the Starter Project

![Screen Shot 2022-08-11 at 11.15.03 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F823615df-52b6-4913-bb60-84796f3c28ae?alt=media&token=128d152a-8323-4794-b138-1152d038a295)

## OpenAPI

>OpenAPI is a standard format that defines the capabilities of a REST API.

Below is a snippet from an OpenAPI specification that describes:

1. The path for one of the operations, as well as a description of what it does.
2. Parameters to be included for the operation to succeed.
3. The response to expect if the client makes a good request.

![Screen Shot 2022-08-11 at 11.40.25 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F07ca0f2d-67c4-48f0-b3e8-16f396217a06?alt=media&token=81cd278c-49f0-4a0b-ab9b-f7de69adea2c)
 
Computers can read the OpenAPI spec and generate human-friendly documentation.

![Screen Shot 2022-08-11 at 11.53.23 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F4eea7c2f-ef20-4bf6-a04f-0ed09677e07d?alt=media&token=e203073f-eaed-45c9-9c27-c874bbe7ddc3)

In turn, consumers can read the documentation and learn how to use your API.

## Purpose of this Challenge

In this challenge, you will generate documentation for the Contact API.

## Dependencies 

The starter project includes the OpenAPI dependency.

![Screen Shot 2022-08-11 at 11.55.32 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F50f57704-c268-45b8-809c-fce60722462d?alt=media&token=ddfe17d9-87bf-437d-a33c-3e6c3fba7be4)

## Side Note

If you remove the version, Maven will not know which version of your dependency to grab:

![Screen Shot 2022-08-12 at 12.00.06 AM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2Fd57d0cc7-7637-4a52-8e6c-917d12eecfc0?alt=media&token=bb48f356-689f-4cb4-9e5e-1aec08100a7d)

Conversely, the parent POM (Spring Boot Starter Parent) takes care of dependency management for Spring Boot starters.  

![Screen Shot 2022-08-12 at 12.11.18 AM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F92783427-e2c1-456c-a442-e144aaec8473?alt=media&token=3c815f42-afd0-421f-b60b-5143c8148f45)

## Task 1
Run the application, and navigate to `http://localhost:8080/v3/api-docs`.

![Screen Shot 2022-08-12 at 4.41.28 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F9043b47e-bcb7-479b-87a8-17d79df0c93d?alt=media&token=af1f1a85-eb05-445b-9516-04d0b3d3efab)

An OpenAPI spec that documents your application is autogenerated. If you format the JSON, notice that it detects and documents every operation:

![Screen Shot 2022-08-12 at 4.54.15 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F9922ea6a-e0dd-410d-a3e7-dda01b5d802b?alt=media&token=c46e66db-90af-4b00-8535-a44d9989fdb3)

Navigate to `http://localhost:8080/swagger-ui/index.html`.

![Screen Shot 2022-08-12 at 4.58.44 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F9467c74b-d04b-4592-8752-84680badc7f0?alt=media&token=b1b34572-3ad0-412a-8ce6-ab236c796e86)


## Task 2

The next task is to configure the OpenAPI definition:

- Create a new folder called `config`.
- Create a new class called `OpenApiConfig`.
- Mark this class as a source of bean definitions (**hint:** see cheat sheet from the beans section).
- Create a bean definition named: `openAPI` that returns an `OpenAPI` object.

## Task 3

Behind the scenes, Spring Boot can leverage the OpenAPI bean to update the:

1. Title.
2. Version.
3. Description of what the API does.

![Screen Shot 2022-08-12 at 5.11.46 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F58006537-2511-4845-8ec1-87cc3acc1be1?alt=media&token=7f35ba24-2526-48f3-a675-97263a0b4bd2)

Consult the [**Spring Documentation**](https://springdoc.org/index.html#migrating-from-springfox), and scroll down until it discusses the OpenAPI bean. Take inspiration from the docs, and configure your OpenAPI bean to achieve the following output:

![Screen Shot 2022-08-12 at 5.16.32 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2Fe2b984a9-fcdb-40ac-935a-43f480fef3c7?alt=media&token=91f5618b-7bb7-4202-8346-9a09cb964ae5)

## Task 4

> `@Tag` can group operations together. 

If you look inside the current OpenAPI definition, every operation has a `contact-controller` tag.

 ![Screen Shot 2022-08-12 at 6.39.38 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2Fb9d4c278-bb82-4655-96e0-359cf1133305?alt=media&token=aeeda6fc-6041-468a-9426-6ff25145ea3a)

As a result, `Swagger` groups the operations under the same tag.

![Screen Shot 2022-08-12 at 6.42.21 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F797f20aa-5058-43a2-98e1-743ef5da43f1?alt=media&token=11bcbfab-6b7a-4ed2-a063-c0134696290a)

Your next exercise is to apply the `@Tag(name = "name")` annotation to each operation.

![Screen Shot 2022-08-12 at 6.45.30 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F5e1fcfe3-93b3-4d2b-9627-7ef4f158206f?alt=media&token=53db80dd-6ffc-4188-bf1a-be8cf94ca2f1)

## Task 5

> @Tag can be applied at the **class** or method level.

Given that `@Tag` has attributes of `name` and `description`:
- Group every operation under the tag: **Contact Controller**. 
- Provide a general description of: `"Create and retrieve contacts"`.

![Screen Shot 2022-08-12 at 6.52.49 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F42537d7b-3787-4158-ba43-5c18908776c4?alt=media&token=b1d34cb5-6195-45a3-bf29-591d0c147f83)

## Task 6

Use `@Operation` at the method level to provide each operation with a summary and description.

![Screen Shot 2022-08-12 at 6.54.39 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2F0c5b275f-f8df-4734-bfce-7488033513ba?alt=media&token=66332e57-5c36-4895-ae14-218c3d59927e)

**`getContacts`**
- summary: Retrieves contacts
- description: Provides a list of all contacts

**`getContact`**

- summary: Get contact by Id
- description: Returns a contact based on an ID

**`createContact`**

- summary: Create Contact
- description: Creates a contact from the provided payload

## Task 7

>**`@ApiResponse`** documents how each operation responds.

Apply it at the level of each method:

### **`getContacts`**
-----
```json
    import io.swagger.v3.oas.annotations.media.*;
    import io.swagger.v3.oas.annotations.responses.ApiResponse;

    @ApiResponse(responseCode = "200", description = "Successful retrieval of contacts", content = @Content(array = @ArraySchema(schema = @Schema(implementation = Contact.class))))
```
This reads like english. The operation will:
1. Return a status code of 200.
2. Retrieve all contacts from the datastore.
3. Return a JSON Array of Contact resources.

![Screen Shot 2022-08-12 at 7.53.00 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2Fce6a6d3e-fb90-4728-bf05-b1c65ac4a573?alt=media&token=cda47d8b-42f0-4ea7-93c2-be72f18cb476)

### **`getContact`**
------
    @ApiResponses(value = {
        @ApiResponse(responseCode = "404", description = "Contact doesn't exist", content = @Content(schema = @Schema(implementation = ErrorResponse.class))),
        @ApiResponse(responseCode = "200", description = "Successful retrieval of contact", content = @Content(schema = @Schema(implementation = Contact.class))),
    })

Since `getContact` is also prone to a 404 response, it must be documented to the consumer as well

### **`createContact`**
-----
    @ApiResponses(value = {
        @ApiResponse(responseCode = "201", description = "Successful creation of contact"),
        @ApiResponse(responseCode = "400", description = "Bad request: unsuccessful submission", content = @Content(schema = @Schema(implementation = ErrorResponse.class)))
     })

## Task 8

Add the following attribute to each `@RequestMapping`:

-    `@GetMapping(value = "/contact/all", ` **`produces = MediaType.APPLICATION_JSON_VALUE)`**

This will specify that the operation produces a JSON.

![Screen Shot 2022-08-12 at 7.58.33 PM.png](https://firebasestorage.googleapis.com/v0/b/learnthepart-75aed.appspot.com/o/images%2Fcf587457-a0a9-412e-bc45-bb0ae56908e9?alt=media&token=16265ca5-520c-4954-b530-99a0f8899b50)

## Final Remarks

Congratulations! You just documented your API. Consumers can use it to understand how it works.

--------
##### Subscribe to our [YouTube Channel](https://www.youtube.com/@RayanSlim087?sub_confirmation=1) and Discover More Valuable Content!